!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("embla-carousel")):"function"==typeof define&&define.amd?define(["embla-carousel"],t):(e=e||self).EmblaCarouselWheelGestures=t(e.EmblaCarousel)}(this,(function(e){"use strict";function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function n(e,t){if(e.length!==t.length)throw new Error("vectors must be same length");return e.map((function(e,n){return e+t[n]}))}function i(e){return Math.max.apply(Math,e.map(Math.abs))}function o(e){return Object.freeze(e),Object.values(e).forEach((function(e){null===e||"object"!=typeof e||Object.isFrozen(e)||o(e)})),e}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var r=[1,18,"undefined"!=typeof window&&window.innerHeight||800],a=[-1,-1,-1],s=o({preventWheelAction:!0,reverseSign:[!0,!0,!1]}),u={active:!0,breakpoints:{},wheelDraggingClass:"is-wheel-dragging",forceWheelAxis:void 0,target:void 0};function c(l){var m,f=e.optionsHandler(),d=f.merge(u,c.globalOptions),v=function(){},h={name:"wheelGestures",options:f.merge(d,l),init:function(e){var u,c;m=f.atMedia(h.options);var l,d=e.internalEngine(),p=null!=(u=m.target)?u:e.containerNode().parentNode,g=null!=(c=m.forceWheelAxis)?c:d.options.axis,M=function(e){void 0===e&&(e={});var u,c,l,m=function(){var e={};function t(t,n){e[t]=(e[t]||[]).filter((function(e){return e!==n}))}return o({on:function(n,i){return e[n]=(e[n]||[]).concat(i),function(){return t(n,i)}},off:t,dispatch:function(t,n){t in e&&e[t].forEach((function(e){return e(n)}))}})}(),f=m.on,d=m.off,v=m.dispatch,h=s,p={isStarted:!1,isStartPublished:!1,isMomentum:!1,startTime:0,lastAbsDelta:Infinity,axisMovement:[0,0,0],axisVelocity:[0,0,0],accelerationFactors:[],scrollPoints:[],scrollPointsToMerge:[],willEndTimeout:400},g=!1,M=function(e){Array.isArray(e)?e.forEach((function(e){return E(e)})):E(e)},b=function(e){return void 0===e&&(e={}),Object.values(e).some((function(e){return null==e}))?h:h=o(t({},s,h,e))},x=function(e){var i=t({event:u,isStart:!1,isEnding:!1,isMomentumCancel:!1,isMomentum:p.isMomentum,axisDelta:[0,0,0],axisVelocity:p.axisVelocity,axisMovement:p.axisMovement,get axisMovementProjection(){return n(i.axisMovement,i.axisVelocity.map((function(e){return void 0===t&&(t=.996),e*t/(1-t);var t})))}},e);v("wheel",t({},i,{previous:c})),c=i},E=function(e){var o,s=function(e){return t({},e,{axisDelta:e.axisDelta.map((function(e){return Math.min(Math.max(-700,e),700)}))})}(function(e,n){if(!n)return e;var i=!0===n?a:n.map((function(e){return e?-1:1}));return t({},e,{axisDelta:e.axisDelta.map((function(e,t){return e*i[t]}))})}({timeStamp:(o=e).timeStamp,axisDelta:[o.deltaX*r[o.deltaMode],o.deltaY*r[o.deltaMode],(o.deltaZ||0)*r[o.deltaMode]]},h.reverseSign)),c=s.axisDelta,l=s.timeStamp,m=i(c);e.preventDefault&&function(e,t){var n=h.preventWheelAction,i=t[0],o=t[1],r=t[2];if("boolean"==typeof n)return n;switch(n){case"x":return Math.abs(i)>=e;case"y":return Math.abs(o)>=e;case"z":return Math.abs(r)>=e;default:return!1}}(m,c)&&e.preventDefault(),p.isStarted?p.isMomentum&&m>Math.max(2,2*p.lastAbsDelta)&&(L(!0),j()):j(),0===m&&Object.is&&Object.is(e.deltaX,-0)?g=!0:(u=e,p.axisMovement=n(p.axisMovement,c),p.lastAbsDelta=m,p.scrollPointsToMerge.push({axisDelta:c,timeStamp:l}),w(),x({axisDelta:c,isStart:!p.isStartPublished}),p.isStartPublished=!0,A())},w=function(){var e;2===p.scrollPointsToMerge.length?(p.scrollPoints.unshift({axisDeltaSum:p.scrollPointsToMerge.map((function(e){return e.axisDelta})).reduce(n),timeStamp:(e=p.scrollPointsToMerge.map((function(e){return e.timeStamp})),e.reduce((function(e,t){return e+t}))/e.length)}),D(),p.scrollPointsToMerge.length=0,p.scrollPoints.length=1,p.isMomentum||T()):p.isStartPublished||y()},y=function(){var e;p.axisVelocity=(e=p.scrollPointsToMerge,e[e.length-1]).axisDelta.map((function(e){return e/p.willEndTimeout}))},D=function(){var e=p.scrollPoints,t=e[0],n=e[1];if(n&&t){var i=t.timeStamp-n.timeStamp;if(!(i<=0)){var o=t.axisDeltaSum.map((function(e){return e/i})),r=o.map((function(e,t){return e/(p.axisVelocity[t]||1)}));p.axisVelocity=o,p.accelerationFactors.push(r),S(i)}}},S=function(e){var t=10*Math.ceil(e/10)*1.2;p.isMomentum||(t=Math.max(100,2*t)),p.willEndTimeout=Math.min(1e3,Math.round(t))},P=function(e){return 0===e||e<=.96&&e>=.6},T=function(){if(p.accelerationFactors.length>=5){if(g&&(g=!1,i(p.axisVelocity)>=.2))return void O();var e=p.accelerationFactors.slice(-5);e.every((function(e){var t=!!e.reduce((function(e,t){return e&&e<1&&e===t?1:0})),n=e.filter(P).length===e.length;return t||n}))&&O(),p.accelerationFactors=e}},O=function(){p.isMomentum=!0},j=function(){(p={isStarted:!1,isStartPublished:!1,isMomentum:!1,startTime:0,lastAbsDelta:Infinity,axisMovement:[0,0,0],axisVelocity:[0,0,0],accelerationFactors:[],scrollPoints:[],scrollPointsToMerge:[],willEndTimeout:400}).isStarted=!0,p.startTime=Date.now(),c=void 0,g=!1},A=function(){clearTimeout(l),l=setTimeout(L,p.willEndTimeout)},L=function(e){void 0===e&&(e=!1),p.isStarted&&(x(p.isMomentum&&e?{isEnding:!0,isMomentumCancel:!0}:{isEnding:!0}),p.isMomentum=!1,p.isStarted=!1)},C=function(e){var t=[],n=function(n){n.removeEventListener("wheel",e),t=t.filter((function(e){return e!==n}))};return o({observe:function(i){return i.addEventListener("wheel",e,{passive:!1}),t.push(i),function(){return n(i)}},unobserve:n,disconnect:function(){t.forEach(n)}})}(M),V=C.observe,F=C.unobserve,W=C.disconnect;return b(e),o({on:f,off:d,observe:V,unobserve:F,disconnect:W,feedWheel:M,updateOptions:b})}({preventWheelAction:g,reverseSign:[!0,!0,!1]}),b=M.observe(p),x=M.on("wheel",(function(e){var t=e.axisDelta,n=t[0],i=t[1],o="x"===g?i:n,r=e.isEnding&&!e.isMomentum||e.isMomentum&&e.previous&&!e.previous.isMomentum;Math.abs("x"===g?n:i)>Math.abs(o)&&!E&&!e.isMomentum&&function(e){try{S(l=new MouseEvent("mousedown",e.event))}catch(e){return v()}E=!0,document.documentElement.addEventListener("mousemove",y,!0),document.documentElement.addEventListener("mouseup",y,!0),document.documentElement.addEventListener("mousedown",y,!0),m.wheelDraggingClass&&p.classList.add(m.wheelDraggingClass)}(e),E&&(r?function(e){E=!1,S(D("mouseup",e)),w(),m.wheelDraggingClass&&p.classList.remove(m.wheelDraggingClass)}(e):S(D("mousemove",e)))})),E=!1;function w(){document.documentElement.removeEventListener("mousemove",y,!0),document.documentElement.removeEventListener("mouseup",y,!0),document.documentElement.removeEventListener("mousedown",y,!0)}function y(e){E&&e.isTrusted&&e.stopImmediatePropagation()}function D(e,t){var n,i;if(g===d.options.axis){var o=t.axisMovement;n=o[0],i=o[1]}else{var r=t.axisMovement;i=r[0],n=r[1]}return new MouseEvent(e,{clientX:l.clientX+n,clientY:l.clientY+i,screenX:l.screenX+n,screenY:l.screenY+i,movementX:n,movementY:i,button:0,bubbles:!0,cancelable:!0,composed:!0})}function S(t){e.containerNode().dispatchEvent(t)}v=function(){b(),x(),w()}},destroy:function(){return v()}};return h}return c.globalOptions=void 0,c}));
//# sourceMappingURL=embla-carousel-wheel-gestures.umd.js.map
